---
import '../styles/global.css';

export interface Props {
	title?: string;
	description?: string;
}

const {
	title = "WhatCable - Cable & Connector Database",
	description = "Comprehensive database of cable and connector specifications. Demystifying USB-C, Thunderbolt, HDMI, and more."
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>

		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:site_name" content="WhatCable" />

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />

		<!-- SEO -->
		<link rel="canonical" href={Astro.url} />
		<meta name="robots" content="index, follow" />
	</head>

	<body class="bg-background text-foreground">
		<a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary-foreground px-4 py-2 rounded-lg z-50">Skip to main content</a>

		<!-- Header -->
		<header class="sticky top-0 z-50 w-full border-b border-zinc-300 backdrop-blur-md bg-header-bg">
			<div class="mx-auto flex h-16 max-w-5xl items-center justify-between px-4">
				<!-- Logo -->
				<a href="/" class="flex items-center gap-2 font-semibold text-foreground" aria-label="WhatCable home page">
					<div class="flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-accent">
						<span class="text-foreground font-bold text-sm">WC</span>
					</div>
					<span>WhatCable</span>
				</a>

				<!-- Desktop Navigation -->
				<nav class="hidden md:flex items-center gap-6 text-sm" aria-label="Main navigation">
					<a href="/usb" class="hover:underline">USB</a>
					<a href="/video" class="hover:underline">Video</a>
					<a href="/audio" class="hover:underline">Audio</a>
					<a href="/power" class="hover:underline">Power</a>
					|
					<a href="/filter" class="text-muted-foreground hover:text-foreground hover:underline">Filter</a>
					<a href="/search" class="text-muted-foreground hover:text-foreground hover:underline">Search</a>
					<a href="/learn/identify" class="text-muted-foreground hover:text-foreground hover:underline">Identify</a>
				</nav>

				<!-- Mobile Menu Button -->
				<button
					class="md:hidden flex items-center justify-center w-10 h-10 hover:text-foreground rounded-lg transition-colors"
					aria-label="Open navigation menu"
					aria-expanded="false"
					id="mobile-menu-button"
				>
					<svg class="w-6 h-6 hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
					</svg>
					<svg class="w-6 h-6 close-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
					</svg>
				</button>
			</div>

			<!-- Mobile Navigation Menu -->
			<div class="md:hidden hidden" id="mobile-menu">
				<div class="px-4 pt-2 pb-4 bg-card border-t border-border">
					<div class="space-y-1">
						<a href="/usb" class="block px-3 py-3 text-foreground hover:bg-secondary rounded-lg transition-colors">USB Connectors</a>
						<a href="/video" class="block px-3 py-3 text-foreground hover:bg-secondary rounded-lg transition-colors">Video Connectors</a>
						<a href="/audio" class="block px-3 py-3 text-foreground hover:bg-secondary rounded-lg transition-colors">Audio Connectors</a>
						<a href="/power" class="block px-3 py-3 text-foreground hover:bg-secondary rounded-lg transition-colors">Power Connectors</a>
					</div>
					<div class="border-t border-border my-2"></div>
					<div class="space-y-1">
						<a href="/filter" class="block px-3 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors">Filter by Specs</a>
						<a href="/search" class="block px-3 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors">Search Database</a>
						<a href="/learn/identify" class="block px-3 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors">Identify Cable</a>
					</div>
				</div>
			</div>
		</header>

		<main id="main" class="min-h-screen">
			<slot />
		</main>

		<!-- Footer -->
		<footer class="border-t border-border bg-secondary/30">
			<div class="mx-auto max-w-5xl px-4 py-8">
				<div class="flex justify-center">
					<a href="https://centricle.com" class="text-amber-600/70 hover:text-amber-600 transition-colors" title="Built by ksmith" aria-label="Made by ksmith">
						<svg class="w-6 h-6" viewBox="0 0 32 32" fill="none">
							<path d="M 23.5 7.5 C 19 3.5, 11.5 4, 7.5 8.5 C 3.5 13, 4 20.5, 8 24.5 C 12.5 28.5, 20 28, 24 23.5" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"/>
							<ellipse cx="15.5" cy="16.3" rx="3.2" ry="2.8" fill="currentColor"/>
						</svg>
					</a>
				</div>
			</div>
		</footer>

		<script>
			// Mobile menu toggle functionality
			document.addEventListener('DOMContentLoaded', function() {
				const button = document.getElementById('mobile-menu-button');
				const menu = document.getElementById('mobile-menu');

				if (!button || !menu) return;

				const hamburgerIcon = button.querySelector('.hamburger-icon');
				const closeIcon = button.querySelector('.close-icon');
				let isOpen = false;

				function toggleMenu() {
					isOpen = !isOpen;

					// Update menu visibility
					menu.classList.toggle('hidden', !isOpen);

					// Update button state
					button.setAttribute('aria-expanded', isOpen.toString());
					button.setAttribute('aria-label', isOpen ? 'Close navigation menu' : 'Open navigation menu');

					// Toggle icons
					if (hamburgerIcon && closeIcon) {
						hamburgerIcon.classList.toggle('hidden', isOpen);
						closeIcon.classList.toggle('hidden', !isOpen);
					}

					// Focus management
					if (isOpen) {
						const firstLink = menu.querySelector('a');
						if (firstLink) firstLink.focus();
					} else {
						button.focus();
					}
				}

				function closeMenu() {
					if (isOpen) toggleMenu();
				}

				// Button click handler
				button.addEventListener('click', toggleMenu);

				// Escape key handler
				document.addEventListener('keydown', function(event) {
					if (event.key === 'Escape' && isOpen) {
						closeMenu();
					}
				});

				// Click outside handler
				document.addEventListener('click', function(event) {
					if (isOpen && !menu.contains(event.target) && !button.contains(event.target)) {
						closeMenu();
					}
				});

				// Close menu when clicking navigation links
				menu.addEventListener('click', function(event) {
					if (event.target.tagName === 'A') {
						closeMenu();
					}
				});
			});
		</script>
	</body>
</html>
